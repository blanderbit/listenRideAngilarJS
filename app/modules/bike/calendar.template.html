<div id="bikeCalendar"></div>

<div layout="column" layout-margin>
  <p class="md-headline lnr-center">WFS Calendar</p>
  <p class="md-body-1 lnr-center">During the Wiener Fahrradschau, you can test ride a great variety of high end bikes. Just select which day and what timeslot you want to rent it.</p>
  <md-input-container class="md-block">
    <label>1. Select the Rental Day</label>
    <md-select ng-model="calendar.day">
      <!-- <md-option ng-repeat="state in states" value="{{state.abbrev}}">
        {{state.abbrev}}
      </md-option> -->
      <md-option value="1">
        Friday, 21st of Oct
      </md-option>
      <md-option value="2">
        Saturday, 22nd of Oct
      </md-option>
      <md-option value="3">
        Sunday, 23rd of Oct
      </md-option>
    </md-select>
  </md-input-container>
  
  <md-input-container class="md-block">
    <label>2. Select your 2 hour timeslot</label>
    <md-select ng-model="calendar.slot">
      <md-option ng-if="!calendar.day">
        Please select a day first
      </md-option>
      <md-option value="1" ng-if="calendar.day == 1" ng-disabled="::calendar.booked(1, 18)">
        18:00 - 20:00
      </md-option>
      <md-option value="2" ng-if="calendar.day == 1" ng-disabled="::calendar.booked(1, 20)">
        20:00 - 22:00
      </md-option>
      <md-option value="3" ng-if="calendar.day == 1" ng-disabled="::calendar.booked(1, 22)">
        Overnight (22:00 - 10:00 next day)
      </md-option>
      <md-option value="11" ng-if="calendar.day == 2" ng-disabled="::calendar.booked(2, 10)">
        10:00 - 12:00
      </md-option>
      <md-option value="12" ng-if="calendar.day == 2" ng-disabled="::calendar.booked(2, 12)">
        12:00 - 14:00
      </md-option>
      <md-option value="13" ng-if="calendar.day == 2" ng-disabled="::calendar.booked(2, 14)">
        14:00 - 16:00
      </md-option>
      <md-option value="14" ng-if="calendar.day == 2" ng-disabled="::calendar.booked(2, 16)">
        16:00 - 18:00
      </md-option>
      <md-option value="15" ng-if="calendar.day == 2" ng-disabled="::calendar.booked(2, 18)">
        18:00 - 20:00
      </md-option>
      <md-option value="16" ng-if="calendar.day == 2" ng-disabled="::calendar.booked(2, 20)">
        20:00 - 22:00
      </md-option>
      <md-option value="17" ng-if="calendar.day == 2" ng-disabled="::calendar.booked(2, 22)">
        Overnight (22:00 - 10:00 next day)
      </md-option>

      <md-option value="21" ng-if="calendar.day == 3" ng-disabled="::calendar.booked(3, 10)">
        10:00 - 12:00
      </md-option>
      <md-option value="22" ng-if="calendar.day == 3" ng-disabled="::calendar.booked(3, 12)">
        12:00 - 14:00
      </md-option>
      <md-option value="23" ng-if="calendar.day == 3" ng-disabled="::calendar.booked(3, 14)">
        14:00 - 16:00
      </md-option>
      <md-option value="24" ng-if="calendar.day == 3" ng-disabled="::calendar.booked(3, 16)">
        16:00 - 18:00
      </md-option>
    </md-select>
  </md-input-container>
</div>

<div id="timeRange" layout="row" layout-align="start center" layout-padding>
  <md-input-container flex>
    <label>{{ 'shared.from' | translate }}</label>
    <md-select ng-disabled="calendar.startDate == undefined" ng-change="calendar.onTimeChange('start')"
      ng-model="calendar.startTime" placeholder="{{ 'shared.from' | translate }}">
      <md-option ng-repeat="i in [].constructor(17) track by $index" value="{{$index + 6}}">
        {{ ($index + 6) + ":00" }}
      </md-option>
    </md-select>
  </md-input-container>

  <md-input-container flex>
    <label>{{ 'shared.to' | translate }}</label>
    <md-select ng-disabled="calendar.endDate === undefined" ng-change="calendar.onTimeChange('end')"
      ng-model="calendar.endTime" placeholder="{{ 'shared.to' | translate }}">
      <md-option ng-repeat="i in [].constructor(17) track by $index" value="{{$index + 6}}">
        {{ ($index + 6) + ":00" }}
      </md-option>
    </md-select>
  </md-input-container>
</div>

<div id="formSubmit" layout="column" layout-align="center stretch">
  <div id="requestOverview" layout="column" layout-align="center stretch" layout-padding>
    <div layout="row" layout-align="space-between center">
      <div>{{ 'shared.duration' | translate }}</div>
      <div>{{ calendar.duration }}</div>
    </div>

    <md-divider class="lnr-no-padding lnr-margin-lrg"></md-divider>

    <div layout="row" layout-align="space-between center">
      <div>{{ 'shared.subtotal' | translate }}</div>
      <div>{{ calendar.subtotal | currency:"€":2 }}</div>
    </div>

    <div layout="row" layout-align="space-between center">
      <div>{{ 'shared.lnr-fee' | translate }}</div>
      <div>{{ calendar.lnrFee | currency:"€":2 }}</div>
    </div>

    <div layout="row" layout-align="space-between center">
      <div>{{ 'shared.total' | translate }}</div>
      <div>{{ calendar.total | currency:"€":2 }}</div>
    </div>
  </div>

  <md-button type="submit" class="md-raised md-primary lnr-margin-lrg" ng-click="calendar.onBikeRequest()" ng-disabled="calendar.owner || !calendar.loggedIn || calendar.isFormInvalid()">
    {{ 'calendar.request-bike' | translate }}
  </md-button>
  <p ng-if="!calendar.loggedIn" class="md-body-1 center-text">{{ 'calendar.to-request-bike-please' | translate }}<br>{{ 'forms.sign-up' | translate }} {{ 'forms.or' | translate }} {{ 'forms.log-in' | translate }}</p>
  <p ng-if="calendar.owner" class="md-body-1 center-text">{{ 'calendar.own-bike' | translate }}</p>

  <div ng-if="calendar.isDateInvalid()" layout-padding>{{ 'calendar.invalid-date' | translate }}</div>
</div>