<md-content class="single-column">
  <form name="listBike" layout="column" layout-align="start center" layout-padding>
    <h1>{{ 'edit.edit-bike' | translate }}</h1>

    <md-tabs class="content" md-no-pagination md-dynamic-height md-no-ink md-no-ink-bar md-selected="edit.selectedIndex" md-stretch-tabs="always">
      <md-tab class="categories" label="{{ 'list.category.category' | translate }}" layout="row">
        <md-content class="md-padding" layout="column">
          <div class="tab-content" layout="row" layout-align="space-between start" layout-padding>
            <div class="col1" flex-xs="100" flex-gt-xs="45" layout="row" layout-align="space-between start">
              <md-radio-group ng-model="edit.form.mainCategory" layout="column" ng-change="edit.categoryChange({{edit.form.mainCategory}})">
                <md-radio-button ng-repeat="cat in edit.categoryOptions" value="{{cat.value}}">
                  {{ 'list.category.' + cat.label.replace(' ', '-') | translate }}
                </md-radio-button>
              </md-radio-group>

              <md-radio-group ng-model="edit.form.subCategory" layout="column">
                <md-radio-button ng-repeat="subcat in edit.subcategoryOptions[edit.form.mainCategory]" value="{{subcat.value}}">
                  {{ 'list.subcategory.' + edit.form.mainCategory + '.' + subcat.label | translate }}
                </md-radio-button>
              </md-radio-group>
            </div>

            <div class="col2 md-whiteframe-1dp" flex="45" hide-xs>
              {{ 'list.category.hint' | translate }}
            </div>
          </div>
          
          <div class="navigation" layout="row" layout-align="end center">
            <md-button class="md-raised" ng-click="edit.nextTab()">{{ 'list.next' | translate }}</md-button>
          </div>
        </md-content>
      </md-tab>

      <md-tab class="details" label="{{ 'list.details.details' | translate }}" layout="row">
        <md-content class="md-padding" layout="column">
          <div class="tab-content" layout="row" layout-align="space-between start" layout-padding>
            <div class="col1" flex-xs="100" flex-gt-xs="45" layout="column">
              <md-input-container>
                <label>{{ 'list.details.brand' | translate }}</label>
                <input name="brand" required ng-model="edit.form.brand" maxlength="25">
              </md-input-container>

              <md-input-container>
                <label>{{ 'list.details.name' | translate }}</label>
                <input required ng-model="edit.form.name" maxlength="25">
              </md-input-container>

              <md-input-container>
                <label>{{ 'list.details.size' | translate }}</label>
                <md-select required ng-model="edit.form.size">
                  <md-option ng-if="edit.form.mainCategory == 4" ng-repeat="size in edit.kidsSizeOptions" value="{{ size.value }}">
                    {{ size.label }}
                  </md-option>

                  <md-option ng-if="edit.form.mainCategory != 4" ng-repeat="size in edit.sizeOptions" value="{{ size.value }}">
                    {{ size.label }}
                  </md-option>
                </md-select>
              </md-input-container>

              <md-input-container>
                <label>{{ 'list.details.description' | translate }}</label>
                <textarea required md-no-resize minlength="100" name="description" ng-model="edit.form.description" rows="4"></textarea>
                <div ng-messages="listBike.description.$error" role="alert">
                  <div ng-message="minlength">{{ 'list.details.min-length-warning' | translate }}</div>
                </div>
              </md-input-container>
            </div>

            <div class="col2 md-whiteframe-1dp" flex="45" hide-xs>
              {{ 'list.details.hint' | translate }}
            </div>
          </div>
          
          <div class="navigation" layout="row" layout-align="space-between center">
            <md-button class="md-raised" ng-click="edit.previousTab()">{{ 'list.back' | translate }}</md-button>
            <md-button class="md-raised" ng-click="edit.nextTab()">{{ 'list.next' | translate }}</md-button>
          </div>
        </md-content>
      </md-tab>

      <md-tab class="accessories" label="{{ 'list.accessories.accessories' | translate }}" layout="row">
        <md-content class="md-padding" layout="column">
          <div class="tab-content" layout="row" layout-align="space-between start" layout-padding>
            <div class="col1" flex-xs="100" flex-gt-xs="45" layout="column">
              <md-checkbox ng-repeat="acc in edit.accessoryOptions" ng-model="edit.form[acc.model]">
                {{ 'list.accessories.' + acc.label | translate }}
              </md-checkbox>
            </div>

            <div class="col2 md-whiteframe-1dp" flex="45" hide-xs>
              {{ 'list.accessories.hint' | translate }}
            </div>
          </div>
          
          <div class="navigation" layout="row" layout-align="space-between center">
            <md-button class="md-raised" ng-click="edit.previousTab()">{{ 'list.back' | translate }}</md-button>
            <md-button class="md-raised" ng-click="edit.nextTab()">{{ 'list.next' | translate }}</md-button>
          </div>
        </md-content>
      </md-tab>

      <md-tab class="pictures" label="{{ 'list.pictures.pictures' | translate }}" layout="row">
        <md-content class="md-padding" layout="column">
          <div class="tab-content" layout="row" layout-align="space-between start" layout-padding>
            <div class="col1" flex-xs="100" flex-gt-xs="45" layout="column">
              <md-button ng-disabled="edit.form.images.length > 4" ngf-multiple="true"
                ngf-select="edit.addImage($files)" accept=".jpg,.jpeg">
                {{ 'list.pictures.select-images' | translate }}
              </md-button>

              <div class="preview-container" layout="column" layout-wrap layout-margin>
                <div ng-repeat="img in edit.form.images track by $index" layout="row" layout-align="space-between center">
                  <div class="img-preview" ngf-background="img" ngf-as-background="true"></div>
                  <md-button ng-click="edit.removeImage($index)">{{ 'list.pictures.remove' | translate}}</md-button>
                </div>
              </div>
              
            </div>

            <div class="col2 md-whiteframe-1dp" flex="45" hide-xs>
              {{ 'list.pictures.hint' | translate }}
            </div>
          </div>
          
          <div class="navigation" layout="row" layout-align="space-between center">
            <md-button class="md-raised" ng-click="edit.previousTab()">{{ 'list.back' | translate }}</md-button>
            <md-button class="md-raised" ng-click="edit.nextTab()">{{ 'list.next' | translate }}</md-button>
          </div>
        </md-content>
      </md-tab>

      <md-tab class="location" label="{{ 'list.location.location' | translate }}" layout="row">
        <md-content class="md-padding" layout="column">
          <div class="tab-content" layout="row" layout-align="space-between start" layout-padding>
            <div class="col1" flex-xs="100" flex-gt-xs="45" layout="column">
              <autocomplete layout="column" location="edit.form.street" label-id="list-placeholder" required="true" fill-address="edit.fillAddress(place)">
              </autocomplete>

              <md-input-container>
                <label>{{ 'list.location.zip' | translate }}</label>
                <input required ng-model="edit.form.zip">
              </md-input-container>

              <md-input-container>
                <label>{{ 'list.location.city' | translate }}</label>
                <input required ng-model="edit.form.city">
              </md-input-container>

              <md-input-container>
                <label>{{ 'list.location.country' | translate }}</label>
                <input required ng-model="edit.form.country">
              </md-input-container>
            </div>

            <div class="col2 md-whiteframe-1dp" flex="45" hide-xs>
              {{ 'list.location.hint' | translate }}
            </div>
          </div>
          
          <div class="navigation" layout="row" layout-align="space-between center">
            <md-button class="md-raised" ng-click="edit.previousTab()">{{ 'list.back' | translate }}</md-button>
            <md-button class="md-raised" ng-click="edit.nextTab()">{{ 'list.next' | translate }}</md-button>
          </div>
        </md-content>
      </md-tab>

      <md-tab class="pricing" label="{{ 'list.pricing.pricing' | translate }}" layout="row">
        <md-content class="md-padding" layout="column">
          <div class="tab-content" layout="row" layout-align="space-between start" layout-padding>
            <div class="col1" flex-xs="100" flex-gt-xs="45" layout="column">
              <md-input-container>
                <label>{{ 'list.pricing.half-daily-price' | translate }} (€)</label>
                <input type="text" ng-pattern="/^\d+$/" maxlength="3" required ng-model="edit.form.price_half_daily">
              </md-input-container>

              <md-input-container>
                <label>{{ 'list.pricing.daily-price' | translate }} (€)</label>
                <input type="text" ng-pattern="/^\d+$/" maxlength="3" required ng-model="edit.form.price_daily">
              </md-input-container>

              <md-input-container>
                <label>{{ 'list.pricing.weekly-price' | translate }} (€)</label>
                <input type="text" ng-pattern="/^\d+$/" maxlength="3" required ng-model="edit.form.price_weekly">
              </md-input-container>
            </div>

            <div class="col2 md-whiteframe-1dp" flex="45" hide-xs>
              {{ 'list.pricing.hint' | translate }}
            </div>
          </div>
          
          <div class="navigation" layout="row" layout-align="space-between center">
            <md-button class="md-raised" ng-click="edit.previousTab()">{{ 'list.back' | translate }}</md-button>
            <md-button class="md-raised" ng-disabled="!edit.isFormValid() || edit.submitDisabled" ng-click="edit.onFormSubmit()">{{ 'edit.save-changes' | translate }}</md-button>
          </div>
        </md-content>
      </md-tab>
    </md-tabs>
  </form>

  <footer></footer>
</md-content>