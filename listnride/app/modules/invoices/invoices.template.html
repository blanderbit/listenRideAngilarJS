<md-content class="single-column">
  <md-progress-linear class="md-accent" ng-if="invoices.loadingRequests" md-mode="query"></md-progress-linear>

  <div class="content lnr-page-margin" layout="column">
    <div class="lnr-section-title lnr-center" layout="column" layout-align="center center">
      <h1 class="md-headline">Billing</h1>
    </div>

    <md-tabs flex md-dynamic-height md-no-ink md-no-ink-bars md-selected="list.selectedIndex" md-center-tabs="on">
      <md-tab class="profile" label="As Rider">

        <!--TABLE START HERE-->

        <md-list>
          <md-list-item class="md-2-line lnr-table-head">
            <div class="md-list-item-text" layout="row" layout-align="start center">
              <span flex="10">{{ 'invoices.request_id' | translate }}</span>
              <span flex="20">{{ 'invoices.bike' | translate }}</span>
              <span flex="15">{{ 'invoices.start_date' | translate }}</span>
              <span flex="15">{{ 'invoices.end_date' | translate }}</span>
              <span flex="15">{{ 'invoices.location' | translate }}</span>
              <span flex="10">{{ 'invoices.you_paid' | translate }}</span>
              <span flex>{{ 'invoices.invoice' | translate }}</span>
            </div>
          </md-list-item>
          <md-virtual-repeat-container id="vertical-container">
            <div ng-style="{'display': invoices.ridesAsRiderAny ? 'none' : ''}" class="lnr-no-rental">
              <h2>You had no rides yet</h2>
            </div>
            <div class="repeated-items"
                 md-virtual-repeat="year in invoices.years"
                 md-item-size="220">
              <h1>{{year}}</h1>
              <md-list-item class="secondary-button-padding" ng-click="doPrimaryAction($event)" ng-repeat="item in invoices.asRider[year]">
                <span flex="10" class="lnr-list-button">
                  <md-button md-no-ink ui-sref="requests({requestId: item.request_id})"> {{item.id}} </md-button>
                </span>
                <span flex="20" class="lnr-list-button">
                  <md-button md-no-ink ui-sref="bike({bikeId: item.bike_id})"> {{item.bike}} </md-button>
                </span>
                <span flex="15">{{invoices.parseDate(item.start_date)}}</span>
                <span flex="15">{{invoices.parseDate(item.end_date)}}</span>
                <span flex="15">{{item.city}}</span>
                <span flex="10">{{item.payout}} €</span>
                <span flex>
                  <md-button md-no-ink class="md-primary" ng-click="doSecondaryAction($event)">{{ 'shared.download' | translate }}</md-button>
                </span>
              </md-list-item>
            </div>
          </md-virtual-repeat-container>
        </md-list>

        <md-button
                md-no-ink
                class="md-primary"
                ng-click="invoices.getCsv('rider')"
                ng-style="{'display': invoices.ridesAsRiderAny && !invoices.loadingRequests ? '' : 'none'}"
        >
          {{ 'shared.download' | translate }} CSV
        </md-button>

        <!--TABLE END HERE-->

      </md-tab>
      <md-tab class="profile" label="As Lister">

        <!--TABLE START HERE-->

        <md-list>
          <md-list-item class="md-2-line lnr-table-head">
            <div class="md-list-item-text" layout="row" layout-align="start center">
              <span flex="10">{{ 'invoices.request_id' | translate }}</span>
              <span flex="20">{{ 'invoices.bike' | translate }}</span>
              <span flex="15">{{ 'invoices.start_date' | translate }}</span>
              <span flex="15">{{ 'invoices.end_date' | translate }}</span>
              <span flex="15">{{ 'invoices.location' | translate }}</span>
              <span flex="10">{{ 'invoices.payout' | translate }}</span>
              <span flex>{{ 'invoices.invoice' | translate }}</span>
            </div>
          </md-list-item>
          <md-virtual-repeat-container id="vertical-container">
            <div ng-style="{'display': invoices.ridesAsRiderAny ? 'none' : ''}" class="lnr-no-rental">
              <h2>You had no rentals yet</h2>
            </div>
            <div class="repeated-items"
                 md-virtual-repeat="year in invoices.years"
                 md-item-size="220">
              <h1>{{year}}</h1>
              <md-list-item class="secondary-button-padding" ng-click="doPrimaryAction($event)" ng-repeat="item in invoices.asLister[year]">
                <span flex="10" class="lnr-list-button">
                  <md-button md-no-ink ui-sref="requests({requestId: item.request_id})"> {{item.id}} </md-button>
                </span>
                <span flex="20" class="lnr-list-button">
                  <md-button md-no-ink ui-sref="bike({bikeId: item.bike_id})"> {{item.bike}} </md-button>
                </span>
                <span flex="15">{{invoices.parseDate(item.start_date)}}</span>
                <span flex="15">{{invoices.parseDate(item.end_date)}}</span>
                <span flex="15">{{item.city}}</span>
                <span flex="10">{{item.payout}} €</span>
                <span flex>
                  <md-button md-no-ink class="md-primary" ng-click="doSecondaryAction($event)">{{ 'shared.download' | translate }}</md-button>
                </span>
              </md-list-item>
            </div>
          </md-virtual-repeat-container>
        </md-list>

        <md-button
                md-no-ink
                class="md-primary"
                ng-click="invoices.getCsv('lister')"
                ng-style="{'display': invoices.ridesAsRiderAny && !invoices.loadingRequests ? '' : 'none'}"
        >
          {{ 'shared.download' | translate }} CSV
        </md-button>

        <!--TABLE END HERE-->

      </md-tab>
    </md-tabs>
    </div>
  </div>
</md-content>
