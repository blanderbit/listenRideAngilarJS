<div id="bikeCalendar" ng-hide="calendar.bikeFamily == calendar.event.familyId"></div>



<!--        EVENT CALENDAR PICKUP+RETURN        -->
<!-- <div layout="column" layout-margin ng-if="calendar.bikeFamily == calendar.event.familyId">
  <p class="md-headline lnr-center">E-Bike Days Calendar</p>
  <p class="md-body-1 lnr-center">During the E-Bike Days, you can test ride a great variety of high end e-bikes. Just select which day and time you want to rent it. All rentals are free!</p>
  <md-input-container class="md-block">
    <label>1. Select the Rental Day</label>
    <md-select ng-model="calendar.day">
      <md-option value="19">
        Friday, 19th of May
      </md-option>
      <md-option value="20">
        Saturday, 20th of May
      </md-option>
      <md-option value="20">
        Sunday, 21th of May
      </md-option>
    </md-select>
  </md-input-container>
  
  <md-input-container class="md-block">
    <label>2. Select pickup time</label>
    <md-select ng-model="calendar.event.pickupSlotId" ng-change="calendar.event.changePickupSlot()">

      <md-option ng-if="!calendar.day">
        Please select a day first
      </md-option>

      <md-option ng-repeat="slot in calendar.event.slots" ng-disabled="slot.reserved" ng-if="calendar.day == slot.day && slot.pickupEnabled" value="{{$index}}">
        {{slot.text}}
      </md-option>
    
    </md-select>
  </md-input-container>

  <md-input-container class="md-block">
    <label>3. Select return time</label>
    <md-select ng-model="calendar.event.returnSlotId" ng-change="calendar.event.changeReturnSlot()">

      <md-option ng-if="!calendar.day">
        Please select a pickup time first
      </md-option>

      <md-option ng-repeat="slot in calendar.event.slots" ng-disabled="slot.returnDisabled" ng-if="calendar.day == slot.day" value="{{$index}}">
        {{slot.text}}
      </md-option>
    
    </md-select>
  </md-input-container>
</div> -->
<!--      END EVENT CALENDAR        -->

<!--        EVENT CALENDAR FIXED SLOT        -->
<div layout="column" layout-margin ng-if="calendar.bikeFamily == calendar.event.familyId">
  <p class="md-headline lnr-center">Supercross Calendar</p>
  <p class="md-body-1 lnr-center">During the Munich Supercross, you can rent fantastic Cyclocross bikes for free! Just select which day and what time slot you'd like to test them!</p>
  <md-input-container class="md-block">
    <label>1. Select the Rental Day</label>
    <md-select ng-model="calendar.day">
      <md-option value="14">
        Saturday, 14th of Oct
      </md-option>
      <md-option value="15">
        Sunday, 15th of Oct
      </md-option>
    </md-select>
  </md-input-container>
  
  <md-input-container class="md-block">
    <label>2. Select Rental Slot</label>
    <md-select ng-model="calendar.event.pickupSlotId" ng-change="calendar.event.changePickupSlot()">

      <md-option ng-if="!calendar.day">
        Please select a day first
      </md-option>

      <md-option ng-repeat="slot in calendar.event.slots" ng-disabled="slot.reserved" ng-if="calendar.day == slot.day && slot.pickupEnabled" value="{{$index}}">
        {{slot.text}}
      </md-option>
    
    </md-select>
  </md-input-container>

  <md-input-container class="md-block" ng-hide="true">
    <label>3. Select return time</label>
    <md-select ng-model="calendar.event.returnSlotId" ng-change="calendar.event.changeReturnSlot()">

      <md-option ng-if="!calendar.day">
        Please select a pickup time first
      </md-option>

      <md-option ng-repeat="slot in calendar.event.slots" ng-disabled="slot.returnDisabled" ng-if="calendar.day == slot.day" value="{{$index}}">
        {{slot.text}}
      </md-option>
    
    </md-select>
  </md-input-container>
</div>
<!--      END EVENT CALENDAR        -->

<div id="timeRange" layout="row" layout-align="start center" layout-padding ng-if="calendar.bikeFamily != calendar.event.familyId && calendar.startDate">
  <md-input-container flex>
    <label>{{ 'shared.from' | translate }} {{ calendar.startDate | date }}</label>
    <md-select ng-disabled="calendar.startDate == undefined" ng-change="calendar.onTimeChange('start')"
      ng-model="calendar.startTime"
      placeholder="{{ 'shared.from' | translate }}"
    >
      <md-option
        ng-disabled="!calendar.isOptionEnabled($index, calendar.startDate)"
        ng-repeat="i in [].constructor(17) track by $index"
        value="{{$index + 6}}"
      >
        {{ ($index + 6) + ":00" + calendar.availabilityMessage($index, calendar.startDate) }}
      </md-option>
    </md-select>
  </md-input-container>

  <md-input-container flex>
    <label>{{ 'shared.to' | translate }}  {{ calendar.endDate | date }}</label>
    <md-select
      ng-disabled="calendar.endDate === undefined"
      ng-change="calendar.onTimeChange('end')"
      ng-model="calendar.endTime"
      placeholder="{{ 'shared.to' | translate }}"
    >
      <md-option
        ng-disabled="!calendar.isOptionEnabled($index, calendar.endDate)"
        ng-repeat="i in [].constructor(17) track by $index"
        value="{{$index + 6}}"
      >
        {{ ($index + 6) + ":00" + calendar.availabilityMessage($index, calendar.endDate)}}
      </md-option>
    </md-select>
  </md-input-container>
</div>

<div id="formSubmit" layout="column" layout-align="center stretch">
  <div id="requestOverview" layout="column" layout-align="center stretch" layout-padding>
    <div layout="row" layout-align="space-between center" ng-if="calendar.bikeFamily != 2">
      <div layout="row" layout-align="start center">
        <div>{{ 'shared.duration' | translate }}</div>
        <div>
          <md-icon class="lnr-icn-xs md-color-black" md-svg-src="app/assets/ui_icons/icn_info.svg"></md-icon>
          <md-tooltip md-direction="right"><span translate="calendar.info"></span></md-tooltip>
        </div>
      </div>
      <div>{{ calendar.duration }}</div>
    </div>

    <md-divider class="lnr-no-padding lnr-margin-lrg"></md-divider>

    <!-- <div layout="row" layout-align="space-between center">
      <div>{{ 'shared.subtotal' | translate }}</div>
      <div>{{ calendar.subtotal | currency:"€":2 }}</div>
    </div> -->

    <div layout="row" layout-align="space-between center">
      <div layout="row" layout-align="start center">
        <span ng-if="calendar.durationDays">{{calendar.durationDays}} {{ 'shared.days' | translate }} x {{ calendar.prices[0].price | currency:"€":0 }}</span>
        <span ng-if="!calendar.durationDays">0 {{ 'shared.days' | translate }} x {{ calendar.prices[0].price | currency:"€":0 }}</span>
        <div>
          <md-icon class="lnr-icn-xs md-color-black" md-svg-src="app/assets/ui_icons/icn_info.svg"></md-icon>
          <md-tooltip md-direction="right"><span translate="calendar.info-subtotal"></span></md-tooltip>
        </div>
      </div>
      <div>{{ calendar.subtotal | currency:"€":2 }}</div>
    </div>

    <div layout="row" layout-align="space-between center" ng-if="calendar.discount">
      <div class="lnr-dark-green-text" layout="row" layout-align="start center">
        {{ 'shared.discount' | translate }} {{calendar.durationDays}} {{ 'shared.days' | translate }} x {{ calendar.discountRelative | currency:"€":2 }}
        <div>
          <md-icon class="lnr-icn-xs md-color-black" md-svg-src="app/assets/ui_icons/icn_info.svg"></md-icon>
          <md-tooltip md-direction="right"><span translate="calendar.info-discount"></span></md-tooltip>
        </div>
      </div>
      <div class="lnr-dark-green-text">-{{ calendar.discount | currency:"€":2 }}</div>
    </div>

    <div layout="row" layout-align="space-between center">
      <div layout="row">
        {{ 'shared.lnr-fee' | translate }}
        <div>
          <md-icon class="lnr-icn-xs md-color-black" md-svg-src="app/assets/ui_icons/icn_info.svg"></md-icon>
          <md-tooltip md-direction="right"><span translate="calendar.info-service-fee"></span></md-tooltip>
        </div>
      </div>
      <div>{{ calendar.lnrFee | currency:"€":2 }}</div>
    </div>

    <div layout="row" layout-align="space-between center">
      <div>{{ 'shared.total' | translate }}</div>
      <div>{{ calendar.total | currency:"€":2 }}</div>
    </div>
    <div class="text-error md-caption"
         ng-if="calendar.bikeFamily != 2 && calendar.isDateInvalid()"
         layout-padding>
      {{ 'calendar.invalid-date' | translate }}
    </div>
    <div class="text-error md-caption"
         ng-if="calendar.owner">
      {{ 'calendar.own-bike' | translate }}
    </div>
  </div>

  <md-button
    type="submit"
    class="md-raised md-primary lnr-margin-lrg"
    ng-click="calendar.onBooking()"
    ng-if="!calendar.isFormInvalid()"
    ng-disabled="calendar.owner || calendar.requested"
  >
    {{ 'calendar.request-bike' | translate }}
  </md-button>
  <md-button
    type="submit"
    class="md-raised md-primary lnr-margin-lrg"
    ng-click="calendar.onBikeRequest()"
    ng-if="calendar.isFormInvalid()"
    ng-disabled="true">
    {{ 'calendar.select-timespan' | translate }}
  </md-button>
  <!-- <p ng-if="!calendar.authentication.loggedIn()" class="md-caption center-text lnr-margin-lrg">{{ 'calendar.to-request-bike-please' | translate }} {{ 'forms.sign-up' | translate }} {{ 'forms.or' | translate }} {{ 'forms.log-in' | translate }}</p> -->
</div>
