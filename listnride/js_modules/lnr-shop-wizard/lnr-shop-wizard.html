<html>

<head>
    <title>Listnride - The perfect bike, simply rent it</title>

    <!-- Material Design Lite -->
    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <link href="https://code.getmdl.io/1.2.1/material.blue_grey-blue.min.css" rel="stylesheet"></link>

    <!-- change this url with your local one -->
    <!-- only for local dev, final css will be served from: https://s3.eu-central-1.amazonaws.com/listnride-cdn/lnr-embed.min.css -->
    <link href="lnr-shop-wizard.css" rel="stylesheet"></link>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <!-- Include Required Prerequisites -->
    <link rel="stylesheet" href="daterangepicker.css">
    <script type="text/javascript" src="jquery.daterangepicker.js"></script>
    <!-- lnr wizard: translations, helper and implementation -->
    <script type="text/javascript" src="lnr-shop-wizard.translations.js"></script>
    <script type="text/javascript" src="lnr-shop-wizard.date.js"></script>
    <script type="text/javascript" src="lnr-shop-wizard.js"></script>
    <script type="text/javascript" src="lnr-shop-wizard.helper.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <!-- header -->
        <header class="mdl-layout__header" id="lnr-header">
            <div class="mdl-layout__header-row" id="lnr-header-logo">
                <img src="lnr_logo_bold.svg" width="95">
                <lnr-header-text translate="shared.lnrHeaderText">lnrHeaderText</lnr-header-text>
            </div>
        </header>
        <!-- wizard -->
        <main class="mdl-layout__content">
            <div class="page-content">
                <div class="mdl-tabs mdl-js-tabs">
                    <!-- tabs -->
                    <div class="mdl-tabs__tab-bar" id="lnr-tab-bar">
                        <a href="#duration-panel" class="mdl-tabs__tab is-active" id="tab-duration" translate="tabs.tabDuration"></a>
                        <a href="#basic-info-panel" class="mdl-tabs__tab" id="tab-basic-info" translate="tabs.tabBasicInfo"></a>
                        <a href="#payment-details-panel" class="mdl-tabs__tab" id="tab-payment-details" translate="tabs.tabPaymentDetail"></a>
                        <a href="#booking-overview-panel" class="mdl-tabs__tab" id="tab-booking-overview" translate="tabs.tabBookingOverview"></a>
                    </div>
                    <!-- duration tab -->
                    <div class="mdl-tabs__panel is-active" id="duration-panel">
                        <div class="mdl-grid lnr-row-top">
                            <div class="mdl-cell">
                                <p class="md-title-sm" translate="rental.title"></p>
                                <p class="md-subhead-sm" translate="rental.description"></p>
                            </div>
                        </div>
                        <div class="mdl-grid">
                            <!-- duration calendar -->
                            <div class="lnr-column-left mdl-cell mdl-cell--7-col mdl-cell--5-col-tablet mdl-cell--4-col-phone">
                                <!-- busy loader until calendar loads -->
                                <div id="bike-calendar-loader">
                                    <div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div>
                                </div>
                                <!-- render the calendar here -->
                                <div id="bike-calendar"></div>
                                <!-- time range selection -->
                                <div id="time-range">
                                    <div class="mdl-cell mdl-cell--5-col mdl-cell--3-col-tablet mdl-cell--4-col-phone dropdown-calendar">
                                        <span class="label" id="lnr-date-start" translation="durationPanel.from"></span>
                                        <button id="lnr-date-start-button" onclick="helper.openCalendarDropDown('lnr-date-from-dropdown', '\'start\'')" class="lnr-dropdown-button"></button>
                                        <div id="lnr-date-from-dropdown" class="dropdown-content"></div>
                                    </div>
                                    <div class="mdl-cell mdl-cell--5-col mdl-cell--3-col-tablet mdl-cell--4-col-phone dropdown-calendar">
                                        <span class="label" id="lnr-date-end" translation="durationPanel.to"></span>
                                        <button id="lnr-date-end-button" onclick="helper.openCalendarDropDown('lnr-date-to-dropdown', '\'end\'')" class="lnr-dropdown-button"></button>
                                        <div id="lnr-date-to-dropdown" class="dropdown-content"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- rent info -->
                            <div class="lnr-column-right mdl-cell mdl-cell--5-col mdl-cell--3-col-tablet mdl-cell--4-col-phone">
                                <p class="md-title-sm" translate="rental.title"></p>
                                <p class="md-subhead-sm" translate="rental.description"></p>
                                <rental-info></rental-info>
                            </div>
                        </div>
                        <div class="mdl-grid lnr-row-bot">
                            <div class="mdl-cell">
                                <rental-info></rental-info>
                            </div>
                        </div>
                        <!-- nav buttons -->
                        <nav-buttons back="" back-text="" next="'tab-basic-info'" next-text="navigation.next"></nav-buttons>
                    </div>
                    <!-- user info tab -->
                    <div class="mdl-tabs__panel" id="basic-info-panel">
                        <div class="mdl-grid lnr-row-top">
                            <div class="mdl-cell">
                                <p class="md-title-sm">
                                    <span class="info-title-empty" translate="info.titleEmpty"></span>
                                    <span class="info-title" translate="info.title"></span>
                                    <span class="first-name-text"></span>
                                </p>
                                <p class="md-subhead-sm" translate="info.description"></p>
                            </div>
                        </div>
                        <div class="mdl-grid">
                            <!-- personal info form -->
                            <div class="lnr-column-left mdl-cell mdl-cell--7-col mdl-cell--5-col-tablet mdl-cell--4-col-phone">
                                <form>
                                    <div class="lnr-input-containers" layout="row">
                                        <md-input-container flex>
                                            <label translate="info.firstName"></label>
                                            <input id="first_name_input" name="first_name" class="md-input" required>
                                        </md-input-container>
                                    </div>
                                    <div class="lnr-input-containers" layout="row">
                                        <md-input-container flex>
                                            <label translate="info.lastName"></label>
                                            <input name="last_name" class="md-input" required>
                                        </md-input-container>
                                    </div>
                                    <div class="lnr-input-containers" layout="row">
                                        <md-input-container>
                                            <label translate="info.email"></label>
                                            <input name="email" class="md-input" type="email">
                                        </md-input-container>
                                    </div>
                                    <div class="lnr-input-containers" layout="row">
                                        <md-input-container>
                                            <label translate="info.emailRepeat"></label>
                                            <input name="email" class="md-input" type="email">
                                        </md-input-container>
                                    </div>
                                </form>
                            </div>
                            <!-- rent info -->
                            <div class="lnr-column-right mdl-cell mdl-cell--5-col mdl-cell--3-col-tablet mdl-cell--4-col-phone">
                                <p class="md-title-sm">
                                    <span class="info-title-empty" translate="info.titleEmpty"></span>
                                    <span class="info-title" translate="info.title"></span>
                                    <span class="first-name-text"></span>
                                </p>
                                <p class="md-subhead-sm" translate="info.description"></p>
                            </div>
                        </div>
                        <!-- nav buttons -->
                        <nav-buttons back="'tab-duration'" back-text="navigation.back" next="'tab-payment-details'" next-text="navigation.next"></nav-buttons>
                    </div>
                    <!-- payment tab -->
                    <div class="mdl-tabs__panel" id="payment-details-panel">
                        <div class="mdl-grid lnr-row-top">
                            <div class="mdl-cell">
                                <p class="md-title-sm" translate="payment.title"></p>
                                <p class="md-subhead-sm" translate="payment.description"></p>
                            </div>
                        </div>
                        <div class="mdl-grid">
                            <!-- payment info form -->
                            <div id="sp-payment" class="lnr-column-left mdl-cell mdl-cell--7-col mdl-cell--5-col-tablet mdl-cell--4-col-phone">
                                <div class="mdl-grid" style="padding: 0">
                                    <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone" style="margin: 0 10px 0 0">
                                        <button id="sp-button-paypal" class="lnr-paypal md-accent md-raised md-button"><span translate="payment.payPal"></span></button>
                                    </div>
                                    <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone" style="margin: 0 0 0 10px">
                                        <button class="lnr-mastercard md-accent md-raised md-button" onclick="helper.showCreditCardForm()" style="float: right"><span translate="payment.creditCard"></span></button>
                                    </div>
                                </div>
                                <form id="sp-payment-form">
                                    <div class="mdl-grid">
                                        <div class="mdl-cell mdl-cell--12-col lnr-input-containers">
                                            <md-input-container flex>
                                                <label translate="payment.cardholderName"></label>
                                                <input name="sp-payment-cardholder" class="md-input" required>
                                            </md-input-container>
                                        </div>
                                        <div class="mdl-cell mdl-cell--12-col lnr-input-containers">
                                            <md-input-container flex>
                                                <label translate="payment.cardNumber"></label>
                                                <input name="sp-payment-cardnumber" class="md-input" required>
                                            </md-input-container>
                                        </div>
                                        <div class="mdl-cell mdl-cell--4-col mdl-cell--3-col-tablet dropdown-payment">
                                            <label translate="payment.expiry"></label>
                                            <button id="lnr-payment-date-button" onclick="helper.openExpirationDropdown('lnr-payment-date-dropdown', '\'date\'')" class="lnr-dropdown-button"></button>
                                            <div id="lnr-payment-date-dropdown" class="dropdown-content">
                                            </div>
                                        </div>
                                        <div class="mdl-cell mdl-cell--4-col mdl-cell--3-col-tablet dropdown-payment">
                                            <label>&nbsp;</label>
                                            <button id="lnr-payment-year-button" onclick="helper.openExpirationDropdown('lnr-payment-year-dropdown', '\'year\'')" class="lnr-dropdown-button">To
                                            </button>
                                            <div id="lnr-payment-year-dropdown" class="dropdown-content">
                                            </div>
                                        </div>
                                        <div class="mdl-cell mdl-cell--4-col mdl-cell--2-col-tablet">
                                            <div class="lnr-input-containers">
                                                <md-input-container>
                                                    <label translate="payment.CVV"></label>
                                                    <input name="sp-payment-cvv" placeholder="123" class="md-input" type="text">
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <button id="sp-save-payment-data" translate="payment.save"></button>
                                    </div>
                                </form>
                            </div>
                            <!-- rent info -->
                            <div class="lnr-column-right mdl-cell mdl-cell--5-col mdl-cell--3-col-tablet mdl-cell--4-col-phone">
                                <p class="md-title-sm" translate="payment.title"></p>
                                <p class="md-subhead-sm" translate="payment.description"></p>
                            </div>
                        </div>
                        <!-- nav buttons -->
                        <nav-buttons back="'tab-basic-info'" back-text="navigation.back" next="'tab-booking-overview'" next-text="navigation.next"></nav-buttons>
                    </div>
                    <!-- booking overview tab -->
                    <div class="mdl-tabs__panel" id="booking-overview-panel">
                        <div class="mdl-grid lnr-row-top">
                            <div class="mdl-cell">
                                <p class="md-title-sm" translate="overview.title"></p>
                                <p class="md-subhead-sm" translate="overview.description"></p>
                            </div>
                        </div>
                        <div class="mdl-grid">
                            <!-- overview info -->
                            <div class="lnr-column-left mdl-cell mdl-cell--7-col mdl-cell--5-col-tablet mdl-cell--4-col-phone">
                                <p>blabla</p>
                            </div>
                            <!-- rent info -->
                            <div class="lnr-column-right mdl-cell mdl-cell--5-col mdl-cell--3-col-tablet mdl-cell--4-col-phone">
                                <p class="md-title-sm" translate="overview.title"></p>
                                <p class="md-subhead-sm" translate="overview.description"></p>
                                <rental-info></rental-info>
                            </div>
                        </div>
                        <div class="mdl-grid lnr-row-bot">
                            <div class="mdl-cell">
                                <rental-info></rental-info>
                            </div>
                        </div>
                        <!-- nav buttons -->
                        <nav-buttons back="'tab-payment-details'" back-text="navigation.back" next="'tab-duration'" next-text="navigation.proceed"></nav-buttons>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <!-- Loading Braintree -->
    <script src="https://js.braintreegateway.com/web/3.9.0/js/client.min.js"></script>
    <script src="https://js.braintreegateway.com/web/3.9.0/js/paypal.min.js"></script>
    <script>
        // We generated a client token for you so you can test out this code
        // immediately. In a production-ready integration, you will need to
        // generate a client token on your server (see section below).
        var authorization = 'eyJ2ZXJzaW9uIjoyLCJhdXRob3JpemF0aW9uRmluZ2VycHJpbnQiOiI4MWI5MjUzNDk3ODllNjg0YzBlMzg0YjQ5MTA4MTNlM      jI5M2I2NjdiZDhkYzJkYzQ1YTJlNTZiZTFmZTE0NzU4fGNyZWF0ZWRfYXQ9MjAxNy0wMy0wNlQxMTozMTowMC4zNTU5NjUzNTArMDAwMFx1MDAyNm1lcmN      oYW50X2lkPTM0OHBrOWNnZjNiZ3l3MmJcdTAwMjZwdWJsaWNfa2V5PTJuMjQ3ZHY4OWJxOXZtcHIiLCJjb25maWdVcmwiOiJodHRwczovL2FwaS5zYW5kY    m94LmJyYWludHJlZWdhdGV3YXkuY29tOjQ0My9tZXJjaGFudHMvMzQ4cGs5Y2dmM2JneXcyYi9jbGllbnRfYXBpL3YxL2NvbmZpZ3VyYXRpb24iLCJjaGF        sbGVuZ2VzIjpbXSwiZW52aXJvbm1lbnQiOiJzYW5kYm94IiwiY2xpZW50QXBpVXJsIjoiaHR0cHM6Ly9hcGkuc2FuZGJveC5icmFpbnRyZWVnYXRld2F5L      mNvbTo0NDMvbWVyY2hhbnRzLzM0OHBrOWNnZjNiZ3l3MmIvY2xpZW50X2FwaSIsImFzc2V0c1VybCI6Imh0dHBzOi8vYXNzZXRzLmJyYWludHJlZWdhdGV      3YXkuY29tIiwiYXV0aFVybCI6Imh0dHBzOi8vYXV0aC52ZW5tby5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tIiwiYW5hbHl0aWNzIjp7InVybCI6I    mh0dHBzOi8vY2xpZW50LWFuYWx5dGljcy5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tLzM0OHBrOWNnZjNiZ3l3MmIifSwidGhyZWVEU2VjdXJlRW5        hYmxlZCI6dHJ1ZSwicGF5cGFsRW5hYmxlZCI6dHJ1ZSwicGF5cGFsIjp7ImRpc3BsYXlOYW1lIjoiQWNtZSBXaWRnZXRzLCBMdGQuIChTYW5kYm94KSIsI      mNsaWVudElkIjpudWxsLCJwcml2YWN5VXJsIjoiaHR0cDovL2V4YW1wbGUuY29tL3BwIiwidXNlckFncmVlbWVudFVybCI6Imh0dHA6Ly9leGFtcGxlLmN      vbS90b3MiLCJiYXNlVXJsIjoiaHR0cHM6Ly9hc3NldHMuYnJhaW50cmVlZ2F0ZXdheS5jb20iLCJhc3NldHNVcmwiOiJodHRwczovL2NoZWNrb3V0LnBhe    XBhbC5jb20iLCJkaXJlY3RCYXNlVXJsIjpudWxsLCJhbGxvd0h0dHAiOnRydWUsImVudmlyb25tZW50Tm9OZXR3b3JrIjp0cnVlLCJlbnZpcm9ubWVudCI        6Im9mZmxpbmUiLCJ1bnZldHRlZE1lcmNoYW50IjpmYWxzZSwiYnJhaW50cmVlQ2xpZW50SWQiOiJtYXN0ZXJjbGllbnQzIiwiYmlsbGluZ0FncmVlbWVud      HNFbmFibGVkIjp0cnVlLCJtZXJjaGFudEFjY291bnRJZCI6ImFjbWV3aWRnZXRzbHRkc2FuZGJveCIsImN1cnJlbmN5SXNvQ29kZSI6IlVTRCJ9LCJjb2l      uYmFzZUVuYWJsZWQiOmZhbHNlLCJtZXJjaGFudElkIjoiMzQ4cGs5Y2dmM2JneXcyYiIsInZlbm1vIjoib2ZmIn0=';
        
        braintree.client.create({
            authorization: authorization
        }, function (clientErr, clientInstance) {
            if (clientErr) {
                // Handle error in client creation
                return;
            }

            $('#sp-save-payment-data')[0].addEventListener('click', function() {
                var form = document.getElementById('sp-payment-form')
                var data = {
                    creditCard: {
                        number: form['sp-payment-cardnumber'].value,
                        cvv: form['sp-payment-cvv'].value,
                        expirationDate: "10/2020",
                        options: {
                            validate: false
                        }
                    }
                };
                clientInstance.request({
                    endpoint: 'payment_methods/credit_cards',
                    method: 'post',
                    data: data
                }, function (requestErr, response) {
                    // More detailed example of handling API errors: https://codepen.io/braintree/pen/MbwjdM
                    if (requestErr) { throw new Error(requestErr); }
                    console.log('Got nonce:', response.creditCards[0].nonce);
                });
            });

            braintree.paypal.create(
                {
                    client: clientInstance
                },
                function (createErr, paypalInstance) {
                    if (createErr) {
                        if (createErr.code === 'PAYPAL_BROWSER_NOT_SUPPORTED') {
                            console.error('This browser is not supported.');
                        } else {
                            console.error('Error!', createErr);
                        }
                    }
                    $("#sp-button-paypal")[0].addEventListener('click', function () {
                        // Disable the button so that we don't attempt to open multiple popups.
                        $("#sp-button-paypal")[0].setAttribute('disabled', 'disabled');
                        $('#sp-payment-form').hide();
    
                        // Because PayPal tokenization opens a popup, this must be called
                        // as a result of a user action, such as a button click.
                        paypalInstance.tokenize(
                            {
                                flow: 'vault' // Required
                                // Any other tokenization options
                            },
                            function (tokenizeErr, payload) {
                                $("#sp-button-paypal")[0].removeAttribute('disabled');
                                if (tokenizeErr) {
                                // Handle tokenization errors or premature flow closure
                                    switch (tokenizeErr.code) {
                                      case 'PAYPAL_POPUP_CLOSED':
                                        console.error('Customer closed PayPal popup.');
                                        break;
                                      case 'PAYPAL_ACCOUNT_TOKENIZATION_FAILED':
                                        console.error('PayPal tokenization failed. See details:', tokenizeErr.details);
                                        break;
                                      case 'PAYPAL_FLOW_FAILED':
                                        console.error('Unable to initialize PayPal flow. Are your options correct?', tokenizeErr.      details);
                                        break;
                                      default:
                                        console.error('Error!', tokenizeErr);
                                    }
                                } else {
                                    // Submit payload.nonce to your server
                                }
                            });
                        }
                        );
                });
       });
    </script>
</body>

</html>